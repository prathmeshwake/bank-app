<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My Bank Portal</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
body{margin:0;font-family:'Segoe UI',Tahoma;background:#f4f7fa}
.auth-box{max-width:400px;margin:100px auto;background:#fff;padding:40px;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,.2);text-align:center}
.auth-box input{width:85%;padding:12px;margin:10px 0;border-radius:10px;border:1px solid #ccc;font-size:16px}
.auth-box button{padding:12px 25px;margin:10px 0;border-radius:12px;border:none;background:#3498db;color:white;cursor:pointer;font-size:16px;transition:.3s}
.auth-box button:hover{background:#2980b9}
.auth-box a{color:#3498db;text-decoration:underline}
.error-msg{color:red;margin-top:10px;font-weight:bold}

/* Sidebar */
.sidebar{width:220px;background:#2c3e50;color:white;height:100vh;position:fixed;padding-top:30px;display:none}
.sidebar button{display:flex;align-items:center;width:100%;padding:15px;border:none;background:none;color:white;font-size:16px;cursor:pointer;transition:.3s}
.sidebar button i{margin-right:12px;font-size:18px}
.sidebar button:hover{background:#34495e;border-left:4px solid #3498db}

/* Main content */
.main-content{margin-left:0;padding:30px;display:none;transition:.3s}
.main-content.active{margin-left:220px;display:block}

/* Top bar */
.top-bar{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px}
.top-bar h1{color:#2c3e50;font-weight:normal}
.logout-btn{background:#e74c3c;padding:10px 20px;border:none;color:white;border-radius:8px;cursor:pointer;transition:.3s}
.logout-btn:hover{background:#c0392b}

/* Info Cards */
.cards-container{display:flex;gap:20px;margin-bottom:30px}
.info-card{flex:1;background:white;padding:20px;border-radius:15px;text-align:center;transition:.3s}
.info-card:hover{transform:translateY(-5px)}
.info-card h3{color:#34495e;margin-bottom:10px}
.info-card p{font-size:24px;font-weight:bold;color:#3498db}

/* Card sections */
.card{background:white;padding:20px;border-radius:15px;margin-bottom:20px}
.section{display:none}
.section.active{display:block}
.section h2{margin-bottom:15px;color:#34495e}
.section input,.section button{margin:5px 0;padding:10px;border-radius:6px;border:1px solid #ccc;font-size:16px}
.section button{border:none;background:#3498db;color:white;cursor:pointer;transition:.3s}
.section button:hover{background:#2980b9}

/* Transaction history */
ul{list-style:none;padding:0;max-height:150px;overflow-y:auto}
ul li{background:#ecf0f1;padding:10px;margin:5px 0;border-radius:8px}
</style>
</head>
<body>

<!-- Signup -->
<div id="signup" class="auth-box">
<h1>Create Account</h1>
<input type="text" id="signup-username" placeholder="Username">
<input type="password" id="signup-password" placeholder="Password">
<button onclick="signup()">Sign Up</button>
<p>Already have an account? <a href="#" onclick="showLogin()">Login</a></p>
<p id="signup-error" class="error-msg"></p>
</div>

<!-- Login -->
<div id="login" class="auth-box" style="display:none">
<h1>Login</h1>
<input type="text" id="username" placeholder="Username">
<input type="password" id="password" placeholder="Password">
<button onclick="login()">Login</button>
<p>Don't have an account? <a href="#" onclick="showSignup()">Sign Up</a></p>
<p id="error" class="error-msg"></p>
</div>

<!-- Sidebar -->
<div class="sidebar" id="sidebar">
<h2>My Bank</h2>
<button onclick="showSection('account')"><i class="fa fa-user"></i> Account</button>
<button onclick="showSection('transactions')"><i class="fa fa-wallet"></i> Deposit/Withdraw</button>
<button onclick="showSection('transfer')"><i class="fa fa-paper-plane"></i> Transfer</button>
<button onclick="showSection('fd')"><i class="fa fa-coins"></i> FD</button>
<button onclick="showSection('loan')"><i class="fa fa-hand-holding-dollar"></i> Loan</button>
<button onclick="showSection('bill')"><i class="fa fa-file-invoice-dollar"></i> Bill Pay</button>
<button class="logout-btn" onclick="logout()">Logout</button>
</div>

<!-- Dashboard -->
<div class="main-content" id="dashboard">
<div class="top-bar">
<h1>Welcome, <span id="user-name"></span>!</h1>
</div>

<div class="cards-container">
<div class="info-card"><h3>Balance</h3><p>$<span id="balance">0</span></p></div>
<div class="info-card"><h3>FDs</h3><p><span id="fd-count">0</span></p></div>
<div class="info-card"><h3>Loans</h3><p><span id="loan-count">0</span></p></div>
</div>

<div id="account" class="card section">
<h2>Account Details</h2>
<p>Balance: $<span id="balance2">0</span></p>
<p>Account Number: <span id="account-number"></span></p>
</div>

<div id="transactions" class="card section">
<h2>Deposit / Withdraw</h2>
<input type="number" id="amount" placeholder="Enter amount">
<button onclick="deposit()">Deposit</button>
<button onclick="withdraw()">Withdraw</button>
<h3>Transaction History</h3>
<ul id="history"></ul>
</div>

<div id="transfer" class="card section">
<h2>Transfer Money</h2>
<input type="text" id="transfer-user" placeholder="Recipient Username">
<input type="number" id="transfer-amount" placeholder="Amount">
<button onclick="transfer()">Transfer</button>
</div>

<div id="fd" class="card section">
<h2>Fixed Deposit</h2>
<input type="number" id="fd-amount" placeholder="Deposit Amount">
<button onclick="openFD()">Open FD</button>
<ul id="fd-history"></ul>
</div>

<div id="loan" class="card section">
<h2>Loan</h2>
<input type="number" id="loan-amount" placeholder="Loan Amount">
<button onclick="applyLoan()">Apply Loan</button>
<ul id="loan-history"></ul>
</div>

<div id="bill" class="card section">
<h2>Bill Payment</h2>
<input type="text" id="bill-name" placeholder="Bill Name">
<input type="number" id="bill-amount" placeholder="Amount">
<button onclick="payBill()">Pay Bill</button>
<ul id="bill-history"></ul>
</div>
</div>

<script>
// Users stored in localStorage
let users = JSON.parse(localStorage.getItem('users') || '{}');
let currentUser = null;

// Show auth pages
function showSignup(){document.getElementById('signup').style.display='block';document.getElementById('login').style.display='none'}
function showLogin(){document.getElementById('signup').style.display='none';document.getElementById('login').style.display='block'}

// Signup
function signup(){
const username = document.getElementById('signup-username').value.trim().toLowerCase();
const password = document.getElementById('signup-password').value;
if(!username || !password){ document.getElementById('signup-error').textContent="Enter valid credentials"; return; }
if(users[username]){ document.getElementById('signup-error').textContent="Username exists"; return; }
users[username] = { password, balance:0, history:[], accountNumber:Math.floor(10000000 + Math.random()*90000000), fd:[], loans:[], bills:[] };
localStorage.setItem('users', JSON.stringify(users));
document.getElementById('signup-error').textContent="Account created! Login now.";
document.getElementById('signup-username').value=''; document.getElementById('signup-password').value='';
showLogin();
}

// Login
function login(){
const username = document.getElementById('username').value.trim().toLowerCase();
const password = document.getElementById('password').value;
if(users[username] && users[username].password===password){
currentUser=username;
document.getElementById('signup').style.display='none';
document.getElementById('login').style.display='none';
document.getElementById('sidebar').style.display='block';
document.getElementById('dashboard').classList.add('active');
document.getElementById('user-name').textContent=currentUser;
document.getElementById('account-number').textContent=users[currentUser].accountNumber;
updateDashboard();
showSection('account');
} else document.getElementById('error').textContent="Invalid username or password";
}

// Logout
function logout(){currentUser=null; location.reload()}

// Show section
function showSection(id){document.querySelectorAll('.section').forEach(sec=>sec.classList.remove('active'));document.getElementById(id).classList.add('active')}

// Update dashboard
function updateDashboard(){
if(!currentUser) return;
document.getElementById('balance').textContent = users[currentUser].balance.toFixed(2);
document.getElementById('balance2').textContent = users[currentUser].balance.toFixed(2);
document.getElementById('fd-count').textContent = users[currentUser].fd.length;
document.getElementById('loan-count').textContent = users[currentUser].loans.length;

['history','fd-history','loan-history','bill-history'].forEach(id=>{
const ul = document.getElementById(id); ul.innerHTML='';
users[currentUser][id==='history'? 'history' : id.split('-')[0]].forEach(t=>{
let li=document.createElement('li'); li.textContent=t; ul.appendChild(li);
});
});
}

// Banking functions
function deposit(){
const amount=parseFloat(document.getElementById('amount').value);
if(amount>0){ users[currentUser].balance+=amount; users[currentUser].history.unshift(`Deposited $${amount.toFixed(2)}`); localStorage.setItem('users', JSON.stringify(users)); updateDashboard(); document.getElementById('amount').value=''; }
else alert("Enter valid amount");
}

function withdraw(){
const amount=parseFloat(document.getElementById('amount').value);
if(amount>0 && amount<=users[currentUser].balance){ users[currentUser].balance-=amount; users[currentUser].history.unshift(`Withdrew $${amount.toFixed(2)}`); localStorage.setItem('users', JSON.stringify(users)); updateDashboard(); document.getElementById('amount').value=''; }
else alert("Invalid amount or insufficient balance");
}

function transfer(){
const toUser=document.getElementById('transfer-user').value.trim().toLowerCase();
const amount=parseFloat(document.getElementById('transfer-amount').value);
if(!users[toUser]){ alert("Recipient does not exist"); return; }
if(amount>0 && amount<=users[currentUser].balance){ users[currentUser].balance-=amount; users[toUser].balance+=amount; users[currentUser].history.unshift(`Transferred $${amount.toFixed(2)} to ${toUser}`); users[toUser].history.unshift(`Received $${amount.toFixed(2)} from ${currentUser}`); localStorage.setItem('users', JSON.stringify(users)); updateDashboard(); document.getElementById('transfer-user').value=''; document.getElementById('transfer-amount').value=''; }
else alert("Invalid amount");
}

function openFD(){
const amount=parseFloat(document.getElementById('fd-amount').value);
if(amount>0 && amount<=users[currentUser].balance){ users[currentUser].balance-=amount; users[currentUser].fd.unshift(`FD of $${amount.toFixed(2)} opened`); localStorage.setItem('users', JSON.stringify(users)); updateDashboard(); document.getElementById('fd-amount').value=''; }
else alert("Invalid amount");
}

function applyLoan(){
const amount=parseFloat(document.getElementById('loan-amount').value);
if(amount>0){ users[currentUser].balance+=amount; users[currentUser].loans.unshift(`Loan of $${amount.toFixed(2)} approved`); localStorage.setItem('users', JSON.stringify(users)); updateDashboard(); document.getElementById('loan-amount').value=''; }
else alert("Enter valid amount");
}

function payBill(){
const name=document.getElementById('bill-name').value.trim();
const amount=parseFloat(document.getElementById('bill-amount').value);
if(!name || amount<=0){ alert("Enter valid bill"); return; }
if(amount>users[currentUser].balance){ alert("Insufficient balance"); return; }
users[currentUser].balance-=amount; users[currentUser].bills.unshift(`Paid $${amount.toFixed(2)} for ${name}`); localStorage.setItem('users', JSON.stringify(users)); updateDashboard(); document.getElementById('bill-name').value=''; document.getElementById('bill-amount').value='';
}

// Start with signup
showSignup();
</script>

</body>
</html>
